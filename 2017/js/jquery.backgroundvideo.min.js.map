{"version":3,"sources":["jquery.backgroundvideo.js"],"names":["$","backgroundVideo","el","options","defaults","videoid","autoplay","loop","preload","plugin","this","settings","buildVideo","html","preloadString","autoplayString","loopString","_preload","_autoplay","_loop","poster","i","types","length","path","filename","videoEl","document","getElementById","$videoEl","fadeIn","setProportion","proportion","getProportion","width","height","align","centerVideo","windowWidth","window","windowHeight","windowProportion","origProportion","centerX","centerY","css","left","top","extend","resize","bind","play","jQuery"],"mappings":"CAQA,SAAUA,GAERA,EAAEC,gBAAkB,SAASC,EAAIC,GAE/B,IAAIC,GACFC,QAAS,mBACTC,UAAU,EACVC,MAAM,EACNC,SAAS,GAGPC,EAASC,KAEbD,EAAOE,YAEP,IAOIC,EAAa,WACf,IAAIC,EAAO,GACPC,EAAgB,GAChBC,EAAiB,GACjBC,EAAa,GACbC,EAAWR,EAAOE,SAASH,QAC3BU,EAAYT,EAAOE,SAASL,SAC5Ba,EAAQV,EAAOE,SAASJ,KAG1BO,EADEG,EACc,iBAEA,GAIhBF,EADEG,EACe,sBAEA,GAIjBF,EADEG,EACW,cAEA,GAGfN,GAAQ,cAAcJ,EAAOE,SAASN,QAAQ,IAAMS,EAAgBC,EAAiBC,EAEjFP,EAAOE,SAASS,SAClBP,GAAQ,YAAcJ,EAAOE,SAASS,OAAS,MAGjDP,GAAQ,0GACR,IAAI,IAAIQ,EAAE,EAAGA,EAAIZ,EAAOE,SAASW,MAAMC,OAAQF,IAC7CR,GAAQ,gBAAgBJ,EAAOE,SAASa,KAAKf,EAAOE,SAASc,SAAS,IAAIhB,EAAOE,SAASW,MAAMD,GAAG,iBAAiBZ,EAAOE,SAASW,MAAMD,GAAG,OAE/IR,GAAQ,kBACRJ,EAAOP,GAAGW,KAAKA,GACfJ,EAAOiB,QAAUC,SAASC,eAAenB,EAAOE,SAASN,SACzDI,EAAOoB,SAAW7B,EAAES,EAAOiB,SAC3BjB,EAAOoB,SAASC,OAAO,KACvBC,KAGEA,EAAgB,WAClB,IAAIC,EAAaC,IACjBxB,EAAOoB,SAASK,MAAMF,EAAWvB,EAAOE,SAASuB,OACjDzB,EAAOoB,SAASM,OAAOH,EAAWvB,EAAOE,SAASwB,aAEb,IAA1B1B,EAAOE,SAASyB,OACzBC,KAIAJ,EAAgB,WAClB,IAAIK,EAActC,EAAEuC,QAAQL,QACxBM,EAAexC,EAAEuC,QAAQJ,SACzBM,EAAmBH,EAAcE,EACjCE,EAAiBjC,EAAOE,SAASuB,MAAQzB,EAAOE,SAASwB,OACzDH,EAAaQ,EAAe/B,EAAOE,SAASwB,OAMhD,OAJIM,GAAoBC,IACtBV,EAAaM,EAAc7B,EAAOE,SAASuB,OAGtCF,GAGLK,EAAc,WAChB,IAAIM,GAAY3C,EAAEuC,QAAQL,SAAW,IAAMzB,EAAOoB,SAASK,SAAW,GAAM,EACxEU,GAAY5C,EAAEuC,QAAQJ,UAAY,IAAM1B,EAAOoB,SAASM,UAAY,GAAM,EAEjD,YAAzB1B,EAAOE,SAASyB,MAKS,WAAzB3B,EAAOE,SAASyB,MAKS,WAAzB3B,EAAOE,SAASyB,OAClB3B,EAAOoB,SAASgB,IAAI,MAAOD,GAL3BnC,EAAOoB,SAASgB,IAAI,OAAQF,GAL5BlC,EAAOoB,SAASgB,KAAMC,KAAQH,EAASI,IAAOH,KAhFhDnC,EAAOE,SAAWX,EAAEgD,UAAW5C,EAAUD,GACzCM,EAAOP,GAAKA,EAEZU,IA8FFZ,EAAEuC,QAAQU,OAAO,WAAalB,MAC9BtB,EAAOoB,SAASqB,KAAK,QAAS,WAAYxC,KAAKyC,WAEhDC","file":"jquery.backgroundvideo.min.js","sourcesContent":["/*\n* jQuery Background video plugin for jQuery\n* ---\n* Copyright 2011, Victor Coulon (http://victorcoulon.fr)\n* Released under the MIT, BSD, and GPL Licenses.\n* based on jQuery Plugin Boilerplate 1.3\n*/\n\n(function($) {\n\n  $.backgroundVideo = function(el, options) {\n\n    var defaults = {\n      videoid: \"video_background\",\n      autoplay: true,\n      loop: true,\n      preload: true\n    }\n\n    var plugin = this;\n\n    plugin.settings = {}\n\n    var init = function() {\n      plugin.settings = $.extend({}, defaults, options);\n      plugin.el = el;\n\n      buildVideo();\n    }\n\n    var buildVideo = function () {\n      var html = '',\n          preloadString = '',\n          autoplayString = '',\n          loopString = '',\n          _preload = plugin.settings.preload,\n          _autoplay = plugin.settings.autoplay,\n          _loop = plugin.settings.loop;\n\n      if (_preload) {\n        preloadString = 'preload=\"auto\"';\n      } else {\n        preloadString = '';\n      }\n\n      if (_autoplay) {\n        autoplayString = 'autoplay=\"autoplay\"';\n      } else {\n        autoplayString = '';\n      }\n\n      if (_loop) {\n        loopString = 'loop=\"true\"';\n      } else {\n        loopString = '';\n      }\n\n      html += '<video id=\"'+plugin.settings.videoid+'\"' + preloadString + autoplayString + loopString;\n\n      if (plugin.settings.poster) {\n        html += ' poster=\"' + plugin.settings.poster + '\" ';\n      }\n\n      html += 'style=\"display:none;position:fixed;top:0;left:0;bottom:0;right:0;z-index:-100;width:100%;height:100%;\">';\n      for(var i=0; i < plugin.settings.types.length; i++) {\n        html += '<source src=\"'+plugin.settings.path+plugin.settings.filename+'.'+plugin.settings.types[i]+'\" type=\"video/'+plugin.settings.types[i]+'\" />';\n      }\n      html += 'bgvideo</video>';\n      plugin.el.html(html);\n      plugin.videoEl = document.getElementById(plugin.settings.videoid);\n      plugin.$videoEl = $(plugin.videoEl);\n      plugin.$videoEl.fadeIn(2000);\n      setProportion();\n    }\n\n    var setProportion = function () {\n      var proportion = getProportion();\n      plugin.$videoEl.width(proportion*plugin.settings.width);\n      plugin.$videoEl.height(proportion*plugin.settings.height);\n\n      if (typeof plugin.settings.align !== 'undefined') {\n        centerVideo();\n      }\n    }\n\n    var getProportion = function () {\n      var windowWidth = $(window).width();\n      var windowHeight = $(window).height();\n      var windowProportion = windowWidth / windowHeight;\n      var origProportion = plugin.settings.width / plugin.settings.height;\n      var proportion = windowHeight / plugin.settings.height;\n\n      if (windowProportion >= origProportion) {\n        proportion = windowWidth / plugin.settings.width;\n      }\n\n      return proportion;\n    }\n\n    var centerVideo = function() {\n      var centerX = (($(window).width() >> 1) - (plugin.$videoEl.width() >> 1)) | 0;\n      var centerY = (($(window).height() >> 1) - (plugin.$videoEl.height() >> 1)) | 0;\n\n      if (plugin.settings.align == 'centerXY') {\n        plugin.$videoEl.css({ 'left': centerX, 'top': centerY });\n        return;\n      }\n\n      if (plugin.settings.align == 'centerX') {\n        plugin.$videoEl.css('left', centerX);\n        return;\n      }\n\n      if (plugin.settings.align == 'centerY') {\n        plugin.$videoEl.css('top', centerY);\n        return;\n      }\n    }\n\n    init();\n\n    $(window).resize(function() { setProportion(); });\n    plugin.$videoEl.bind('ended', function(){ this.play(); });\n  }\n})(jQuery);\n"]}